{"version":3,"sources":["store/hydration.ts","lookup-overview.tsx","overview-filters.tsx","lookup-details.tsx","models/models.ts","store/filter.ts","store/atom.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","result","__await","then","unwrapped","error","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","_getHistoryItemsFromExtension","_asyncToGenerator","_callee","_context","window","getLookups","hydrate","hydrationInterval","setInterval","clearInterval","data","groupedLookups","lookups","reduce","acc","lookup","index","findIndex","l","text","source","sources","sourceId","label","sentence","trim","amount","Set","sentences","creationDates","created","add","sort","sortLookups","apply","arguments","a","b","LookupOverview","_ref","onClick","React","createElement","Fragment","className","map","LookupOverviewItem","_ref2","size","dangerouslySetInnerHTML","__html","DomPurify","OverviewFilters","activeSource","dateQueryValues","activeDateQueryValue","onChange","textQuery","defaultValue","id","placeholder","e","currentTarget","date","find","v","htmlFor","s","Subtitle","item","aria-busy","Sentences","_ref3","Array","from","Sources","_ref4","open","LookupDetails","selectedItem","goBack","onDelete","onEdit","useEffect","scrollTo","top","behavior","href","concat","target","prompt","dateQueryValueWeek","days","selectedItemAtom","atom","queryParamsAtom","deleted","rangeStepSize","range","lookupsAtom","filteredItemAtom","get","params","_filterLookups","doSearchSource","sourceQuery","doSearchQuery","now","Date","minimumDate","setDate","getDate","dateQuery","filteredLookups","isMatch","indexOf","has","d","sum","Math","min","_toConsumableArray","max","total","filterLookups","totalLookups","LoadMore","props","shown","queryParams","leftOverCount","message","onLoadMore","App","items","useAtomValue","setLookups","useSetAtom","_useAtom","useAtom","_useAtom2","_slicedToArray","setSelectedItem","_useAtom3","_useAtom4","setQueryParams","getHistoryItemsFromExtension","response","confirm","postMessage","_objectSpread","newText","newActiveSource","newDate","document","blob","Blob","JSON","stringify","url","URL","createObjectURL","download","getFullYear","getMonth","click","revokeObjectURL","exportLookups","files","file","reader","FileReader","onload","readerEvent","parse","toString","importLookups","location","reload","readAsText","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.0653a58e.chunk.js","sourcesContent":["import { HistoryItem, HistoryItemSource } from \"../models/models\";\n\ninterface ReturnType {\n    lookups: HistoryItem[],\n    sources: HistoryItemSource[]\n}\n\ndeclare global {\n    interface Window { getLookups?(): any[] }\n}\n\nexport async function getHistoryItemsFromExtension() {\n    return await new Promise<ReturnType>((resolve, reject) => {\n        if (window.getLookups) {\n            hydrate(window.getLookups());\n        } else {\n            const hydrationInterval = window.setInterval(() => {\n                if (window.getLookups) {\n                    window.clearInterval(hydrationInterval);\n                    hydrate(window.getLookups());\n                }\n            }, 200);\n        }\n\n        function hydrate(data: any) {\n            let groupedLookups = data.lookups.reduce((acc: any, lookup: any) => {\n                const index = acc.findIndex((l: any) => l.text === lookup.text);\n                const source = data.sources[lookup.sourceId] ? data.sources[lookup.sourceId].label : \"\"\n                const sentence = (lookup.sentence || '').trim();\n                if (index === -1) {\n                    acc.push({\n                        text: lookup.text,\n                        amount: 1,\n                        sources: (source || '').trim().length > 0 ? new Set([source]) : new Set([]),\n                        sentences: sentence.length > 0 ? new Set([sentence]) : new Set([]),\n                        creationDates: [lookup.created]\n                    });\n                } else {\n                    acc[index].amount++;\n                    if (source) {\n                        acc[index].sources.add(source);\n                    }\n                    if (sentence.length > 0) {\n                        acc[index].sentences.add(lookup.sentence);\n                    }\n\n                    acc[index].creationDates.push(lookup.created);\n                }\n\n                return acc;\n            }, []);\n            groupedLookups.sort(sortLookups);\n            const lookups = groupedLookups.slice(0, 1000);\n            resolve({ lookups, sources: data.sources });\n        }\n    });\n}\n\nfunction sortLookups(a: HistoryItem, b: HistoryItem) {\n    if (a.amount > b.amount) {\n        return -1;\n    }\n\n    if (a.amount < b.amount) {\n        return 1;\n    }\n\n    return 0;\n}","import React from 'react';\nimport { HistoryItem } from './models/models';\nimport * as DomPurify from 'dompurify';\n\ntype OnClick = (item: HistoryItem) => void;\n\nexport function LookupOverview({ lookups, onClick }: { lookups: HistoryItem[], onClick: OnClick }) {\n    return (\n        <>\n            <div className=\"card-grid\">\n                {lookups.map(lookup => <LookupOverviewItem key={lookup.text} lookup={lookup} onClick={onClick} />)}\n            </div>\n        </>\n    )\n}\n\nfunction LookupOverviewItem({ lookup, onClick }: { lookup: HistoryItem, onClick: OnClick }) {\n    const sentences = lookup.sentences.values();\n    let i = 0;\n    let sentence;\n    while (!sentence && i < lookup.sentences.size) {\n        let value = sentences.next().value;\n        if (value && value !== lookup.text) {\n            sentence = value;\n        }\n\n        i++;\n    }\n    return (\n        <div className=\"card-grid-item\" onClick={() => {\n            onClick(lookup)\n        }}>\n            <div className=\"card-grid-item-contents\">\n                <div>\n                    <div>\n                        {lookup.text}\n                    </div>\n                </div>\n                <p className='muted' dangerouslySetInnerHTML={{__html: DomPurify.sanitize(sentence)}}></p>\n            </div>\n            <div>\n                <sup className='sup muted'>{lookup.amount}</sup>\n            </div>\n        </div>\n    );\n}","import React from 'react';\nimport { DateQueryValue, HistoryItemSource } from './models/models';\n\ninterface Props {\n    activeSource: HistoryItemSource | null,\n    activeDateQueryValue: DateQueryValue,\n    dateQueryValues: DateQueryValue[],\n    sources: HistoryItemSource[],\n    textQuery: string,\n    onChange: (activeSource: HistoryItemSource | null, activeDateQueryValue: DateQueryValue, text: string) => void\n}\n\nexport function OverviewFilters({ activeSource, sources, dateQueryValues, activeDateQueryValue, onChange, textQuery }: Props) {\n    const onChangeSource = (e: React.ChangeEvent<HTMLSelectElement>) => {\n        const { value } = e.currentTarget;\n        const source = sources.find(s => s.label === value);\n        onChange(source || null, activeDateQueryValue, textQuery);\n    }\n\n    const onChangeDate = (e: React.ChangeEvent<HTMLSelectElement>) => {\n        const { value } = e.currentTarget;\n        const date = dateQueryValues.find(v => v.value === value);\n        onChange(activeSource, date!, textQuery);\n    }\n\n    const onChangeText = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { value } = e.currentTarget;\n        onChange(activeSource, activeDateQueryValue, value);\n    }\n\n    return (\n        <>\n            <div className='custom-grid'>\n                <input className='col-8' defaultValue={textQuery} type=\"search\" id=\"search\" name=\"search\" placeholder='Search' onChange={onChangeText} />\n                <select className='col-4' onChange={onChangeDate} defaultValue={activeDateQueryValue.value}>\n                    {\n                        dateQueryValues.map(value => <option key={value.value} value={value.value}>{value.label}</option>)\n                    }\n                </select>\n            </div>\n            <details>\n                <summary>More filter options</summary>\n                <label htmlFor=\"source\">Source</label>\n                <select id=\"source\" onChange={onChangeSource} defaultValue={activeSource ? activeSource.label : ''}>\n                    <option value=\"\">All sources</option>\n                    {sources.map(source => <option key={source.label} value={source.label}>{source.label}</option>)}\n                </select>\n            </details>\n        </>\n    );\n}\n","import React, { useEffect } from 'react';\nimport { HistoryItem } from './models/models';\nimport * as DomPurify from 'dompurify';\n\ninterface Props {\n    selectedItem: HistoryItem,\n    goBack: Function,\n    onDelete: (item: HistoryItem) => void,\n    onEdit: (item: HistoryItem, newText: string) => void\n}\n\nfunction LookupDetails({ selectedItem, goBack, onDelete, onEdit }: Props) {\n    useEffect(() => {\n        window.scrollTo({top:0, behavior: 'auto'});\n    }, [])\n    return (\n        <div>\n            <div>\n                <button className=\"secondary outline\" onClick={() => goBack()}>Back</button>\n            </div>\n            <article id=\"example-sentences\">\n                <hgroup>\n                    <h2>{selectedItem.text}</h2>\n                    <Subtitle item={selectedItem} />\n                </hgroup>\n\n                <Sentences item={selectedItem} />\n                <Sources item={selectedItem} />\n\n                <h3>Links</h3>\n                <ul>\n                    <li>\n                        <a href={`https://jpdb.io/search?q=${selectedItem.text}&lang=english#a`} target=\"_blank\">jpdb</a>\n                    </li>\n                    <li>\n                        <a href={`https://massif.la/ja/search?q=${selectedItem.text}`} target=\"_blank\">More example sentences</a>\n                    </li>\n                </ul>\n\n            {/* <button className=\"secondary\">Normalize using jpdb</button> */}\n            <button className=\"secondary\" onClick={() => {\n                let text = prompt(`Edit ${selectedItem.text}`, selectedItem.text);\n                if (text === null || selectedItem.text === text) {\n                    return;\n                }\n\n                text = text.trim();\n                if (text.length === 0) {\n                    return;\n                }\n\n                onEdit(selectedItem, text);\n            }}>Edit</button>\n            <button className=\"secondary\" onClick={() => onDelete(selectedItem)}>Delete</button>\n            </article>\n\n        </div >\n    );\n}\n\ninterface SubtitleProps {\n    item: HistoryItem\n}\nconst Subtitle = ({ item }: SubtitleProps) => {\n    if (!item.sentences) {\n        return <h3 aria-busy=\"true\"></h3>;\n    }\n\n    if (item.sentences.size > 0) {\n        const iterator = item.sentences.values();\n        const sentence = iterator.next();\n        if (sentence.value.length > 0) {\n            return <h3 dangerouslySetInnerHTML={{ __html: DomPurify.sanitize(sentence.value) }}></h3>\n        }\n    }\n\n    return <h3>No sentences found</h3>\n}\n\ninterface SentencesProps {\n    item: HistoryItem\n}\nconst Sentences = ({ item }: SentencesProps) => {\n    const sentences = Array.from(item.sentences).slice(1);\n    if (sentences.length === 0) {\n        return <></>\n    }\n\n    return (\n        <div>\n            <details>\n                <summary>Show {sentences.length} more sentences</summary>\n                <ul>\n                    {sentences.map((s, i) => (<li key={i} dangerouslySetInnerHTML={{ __html: DomPurify.sanitize(s) }}></li>))}\n                </ul>\n            </details>\n        </div>\n    );\n}\n\ninterface SourcesProps {\n    item: HistoryItem\n}\n\nconst Sources = ({ item }: SourcesProps) => {\n    const sources = Array.from(item.sources);\n    return (\n        <details open={false}>\n            <summary>Show {sources.length} sources</summary>\n            <ul>\n                {\n                    sources.map((s, i) => <li key={i}>{s}</li>)\n                }\n            </ul>\n        </details>\n    );\n}\n\nexport default LookupDetails;\n\n","export interface DateQueryValue {\n    label: string,\n    value: 'day' | 'week' | 'month' | 'year',\n    days: number\n}\n\nexport const dateQueryValueWeek: DateQueryValue = {\n    label: 'Last week',\n    value: 'week',\n    days: 7\n};\n\nexport const dateQueryValues: DateQueryValue[] = [\n    {\n        label: 'Last day',\n        value: 'day',\n        days: 1\n    },\n    dateQueryValueWeek,\n    {\n        label: 'Last month',\n        value: 'month',\n        days: 31\n    },\n    {\n        label: 'Last year',\n        value: 'year',\n        days: 365\n    },\n];\n\nexport interface HistoryItem {\n    text: string,\n    amount: number,\n    sentences: Set<string>,\n    sources: Set<string>,\n    creationDates: number[]\n}\n\nexport interface HistoryItemSource {\n    label: string\n}\n\nexport interface Example {\n    text: string,\n    sentences: ExampleSentence[],\n    state: 'error' | 'hasData' | 'loading'\n}\n\nexport interface ExampleSentence {\n    source: {\n        title: string,\n        url: string\n    },\n    text: string,\n    markup: string\n}","import { DateQueryValue, HistoryItem } from \"../models/models\";\n\ninterface FilterLookupsParams {\n    sourceQuery?: string | null,\n    dateQuery: DateQueryValue,\n    textQuery?: string,\n    deleted: string[],\n    range: [number, number]\n}\n\nexport function filterLookups(lookups: HistoryItem[], params: FilterLookupsParams) {\n    const doSearchSource = params.sourceQuery && params.sourceQuery.length > 0;\n    const doSearchQuery = params.textQuery && params.textQuery.length > 0;\n    const now = new Date();\n    let minimumDate = now.setDate(now.getDate() - params.dateQuery.days);\n\n    const filteredLookups = lookups.reduce<HistoryItem[]>((acc, lookup) => {\n        let isMatch = false;\n        if (params.deleted.indexOf(lookup.text) > -1) {\n            return acc;\n        }\n\n        if (doSearchSource && params.sourceQuery) {\n            isMatch = lookup.sources.has(params.sourceQuery);\n            if (!isMatch) {\n                return acc;\n            }\n        }\n\n        isMatch = !!lookup.creationDates.find((d) => d >= minimumDate);\n        if (!isMatch) {\n            return acc;\n        }\n\n        if (doSearchQuery && params.textQuery) {\n            isMatch = lookup.text.indexOf(params.textQuery) > -1;\n            if (!isMatch) {\n                return acc;\n            }\n        }\n\n        if (isMatch) {\n            const now = new Date();\n            const minimumDate = now.setDate(now.getDate() - params.dateQuery.days);\n            lookup.amount = lookup.creationDates.reduce((sum, date) => {\n                if (date >= minimumDate) {\n                    return sum + 1;\n                }\n                return sum;\n            }, 0);\n\n            acc.push(lookup);\n        }\n\n        return acc;\n    }, []);\n\n    filteredLookups.sort(sortLookups);\n    return {\n        lookups: filteredLookups.slice(Math.min(...params.range), Math.max(...params.range)),\n        total: filteredLookups.length\n    };\n}\n\nfunction sortLookups(a: HistoryItem, b: HistoryItem) {\n    if (a.amount > b.amount) {\n        return -1;\n    }\n\n    if (a.amount < b.amount) {\n        return 1;\n    }\n\n    return 0;\n}","import { atom } from \"jotai\";\nimport { DateQueryValue, dateQueryValueWeek, HistoryItem, HistoryItemSource } from \"../models/models\";\nimport { filterLookups } from \"./filter\";\n\nexport interface QueryParams {\n  source: HistoryItemSource | null,\n  text: string,\n  date: DateQueryValue,\n  deleted: string[],\n  rangeStepSize: number,\n  range: [number, number]\n}\nexport const selectedItemAtom = atom<HistoryItem | null>(null);\nexport const queryParamsAtom = atom<QueryParams>({\n  source: null,\n  text: '',\n  date: dateQueryValueWeek,\n  deleted: [],\n  rangeStepSize: 30,\n  range: [0, 30]\n});\n\nexport const lookupsAtom = atom<{ lookups: HistoryItem[], sources: HistoryItemSource[] } | null>(null);\nexport const filteredItemAtom = atom((get) => {\n  const result = get(lookupsAtom);\n  const params = get(queryParamsAtom);\n  if (!result) {\n    return null;\n  }\n\n  const { lookups, total } = filterLookups(result.lookups,\n    {\n      dateQuery: params.date,\n      sourceQuery: params.source ? params.source.label : null,\n      textQuery: params.text,\n      deleted: params.deleted,\n      range: params.range\n    });\n  return { lookups, sources: result.sources, totalLookups: total };\n});\n","import React, { useEffect } from 'react';\nimport './App.css';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport { getHistoryItemsFromExtension } from './store/hydration';\nimport { LookupOverview } from './lookup-overview';\nimport { OverviewFilters } from './overview-filters';\nimport LookupDetails from './lookup-details';\nimport { filteredItemAtom, lookupsAtom, queryParamsAtom, selectedItemAtom, QueryParams } from './store/atom';\nimport { dateQueryValues } from './models/models';\n\ndeclare global {\n  interface Window { getLookups?(): any[], importLookups?(data: any): any }\n}\n\nfunction App() {\n  const items = useAtomValue(filteredItemAtom);\n  const setLookups = useSetAtom(lookupsAtom);\n  const [selectedItem, setSelectedItem] = useAtom(selectedItemAtom);\n  const [queryParams, setQueryParams] = useAtom(queryParamsAtom);\n  useEffect(() => {\n    getHistoryItemsFromExtension().then((response) => {\n      setLookups(response);\n    });\n  }, [setLookups]);\n\n  if (items === null) {\n    return <></>;\n  }\n\n  const { lookups, sources, totalLookups } = items;\n\n  if (selectedItem) {\n    return (\n      <LookupDetails\n        selectedItem={selectedItem}\n        onDelete={(item) => {\n          if (confirm(`Delete all entries with the text ${item.text}?`)) {\n            window.postMessage(`deleteYomichanHistoryItem:${item.text}`);\n            setQueryParams({ ...queryParams, deleted: [...queryParams.deleted, item.text] });\n            setSelectedItem(null);\n          }\n        }}\n        onEdit={(item, newText) => {\n          window.postMessage(`normalizeYomichanHistory:--${item.text}--++${newText}++`);\n          setSelectedItem({\n            ...selectedItem,\n            text: newText\n          });\n        }}\n        goBack={() => {\n          setSelectedItem(null);\n        }} />);\n  }\n\n  return (\n    <div className='header'>\n      <OverviewFilters\n        activeSource={queryParams.source}\n        activeDateQueryValue={queryParams.date}\n        sources={sources}\n        dateQueryValues={dateQueryValues}\n        textQuery={queryParams.text}\n        onChange={(newActiveSource, newDate, newText) => {\n          setQueryParams({\n            ...queryParams,\n            source: newActiveSource,\n            date: newDate,\n            text: newText,\n            deleted: [],\n            // reset range on any changes\n            range: [0, queryParams.rangeStepSize]\n          });\n        }} />\n\n      <details>\n        <summary>Actions</summary>\n        <button onClick={e => exportLookups()}>Export</button>\n        <label htmlFor=\"file\">File browser\n          <input type=\"file\" id=\"file\" name=\"file\" onChange={(e) => {\n            if (!e.target.files) {\n              return;\n            }\n\n            const file = e.target.files[0];\n            const reader = new FileReader();\n            reader.onload = (readerEvent) => {\n              if (!window.getLookups || !readerEvent.target || !readerEvent.target.result) {\n                return;\n              }\n\n              if (confirm('This action will override all the existing data. Are you sure?')) {\n                importLookups(JSON.parse(readerEvent.target.result.toString()));\n              }\n            }\n\n            reader.readAsText(file);\n          }}/>\n        </label>\n      </details>\n\n      <LookupOverview lookups={lookups} onClick={(item) => {\n        setSelectedItem(item)\n      }} />\n      <div>\n        <LoadMore totalLookups={totalLookups} queryParams={queryParams} onLoadMore={() => {\n          setQueryParams({\n            ...queryParams,\n            range: [0, queryParams.range[1] + queryParams.rangeStepSize]\n          });\n        }} />\n      </div>\n    </div >\n  );\n}\ninterface LoadMoreProps {\n  queryParams: QueryParams,\n  onLoadMore: Function,\n  totalLookups: number\n}\nconst LoadMore = (props: LoadMoreProps) => {\n  const shown = Math.max(...props.queryParams.range);\n  const leftOverCount = props.totalLookups - shown;\n  if (leftOverCount <= 0) {\n    return <></>;\n  }\n\n  let message = `Load ${props.queryParams.rangeStepSize} more`;\n  if (leftOverCount < props.queryParams.rangeStepSize) {\n    message = `Load remaining ${leftOverCount}`;\n  }\n\n  return (\n    <button className='secondary' onClick={() => props.onLoadMore()}>{message}</button>\n  );\n}\n\nfunction exportLookups() {\n  if (!window.getLookups) {\n    return;\n  }\n\n  const lookups = window.getLookups();\n  const d = new Date();\n  const a = document.createElement('a');\n  const blob = new Blob([JSON.stringify(lookups)], { type: \"octet/stream\" });\n  const url = window.URL.createObjectURL(blob);\n  a.href = url;\n  a.target = '_blank';\n  a.download = `lookups-export-${d.getFullYear()}-${d.getMonth()}-${d.getDate()}.json`;\n  a.click();\n  window.URL.revokeObjectURL(url);\n}\n\nfunction importLookups(data: any) {\n  if (window.importLookups) {\n    window.importLookups(data);\n    window.location.reload();\n  }\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport '@picocss/pico';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  // Double invokes of useEffect come from strict mode\n  // https://reactjs.org/docs/strict-mode.html#detecting-unexpected-side-effects\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}